<!DOCTYPE html>
<html>
  <head>
    <title>Smelly Python code smell report</title>
    <link href="../../style.css" rel="stylesheet">
    <link href="../../idea.min.css" rel="stylesheet">
  </head>
  <body>
    <h1>Smelly Python</h1>
    <div id="src/database/db.py">
      <h4>
        <a href="../../index.html">Home</a> &gt; src/database/db.py
      </h4>
      <pre id="code-block"><code class="language-python"># -*- encoding: utf-8 -*-

import os

from pymongo import MongoClient
from dotenv import load_dotenv

load_dotenv()

class Database():

    def __init__(self):
        self.URI = os.getenv(&quot;MONGO_URI&quot;)

    def conection(self):
        try:
            client = MongoClient(str(self.URI))
            print(&quot;Base de datos conectada&quot;)
            self.db = client[&quot;tournament&quot;]  # Crea una base de datos
        except:
            print(&quot;No se pudo conectar a la base de datos&quot;)
        
    
    &quot;&quot;&quot;
    Crea las collecciones
    &quot;&quot;&quot;
    def create_collections(self):
        self.players = self.db['players']  # Crea una colleccion players
        self.tournament = self.db['tournaments']

    &quot;&quot;&quot;
    Verifica si un jugador ya esta en la base de datos
    &quot;&quot;&quot;
    def exists(self,ds_id):
        players = self.players.find({&quot;player_ds_id&quot; : f&quot;{ds_id}&quot;})
        if len(list(players)) &gt; 0:
            return True
        return False

    &quot;&quot;&quot;
    Agrega un jugador a la db. si ya existe, acutaliza su nombre
    &quot;&quot;&quot;
    def insert_one_player(self,player):
        if self.exists(player[&quot;player_ds_id&quot;]) == False:
            self.players.insert_one(player)
        else:
            self.players.update_one({&quot;player_ds_id&quot; : player[&quot;player_ds_id&quot;] },{&quot;$set&quot; : {&quot;player_lol_name&quot; : player[&quot;player_lol_name&quot;]}})
        
    &quot;&quot;&quot;
    Agrega una lista de jugadores a la base de datos
    &quot;&quot;&quot;
    def insert_many_players(self,players):
        new_players = []

        for player in players:
            if self.exists(player[&quot;player_ds_id&quot;]) == False:
                new_players.append(player)

        if len(new_players) &gt; 0:
            self.players.insert_many(new_players)
    
    &quot;&quot;&quot;
    Obtener jugadores
    &quot;&quot;&quot;
    def get_players(self):
        return list(self.players.find({}))

    &quot;&quot;&quot;
    Agrega el torneo en la base de datos
    &quot;&quot;&quot;
    def insert_tournament(self,tournament):
        if len(self.get_tournament()) == 0:
            self.tournament.insert_one(tournament)
            return True
        else:
            return False

    &quot;&quot;&quot;
    Obtiene el torneo activo
    &quot;&quot;&quot;
    def get_tournament(self):
        return list(self.tournament.find({}))

    &quot;&quot;&quot;
    Actualiza datos del torneo
    &quot;&quot;&quot;
    def update_tournament(self,points):
        self.tournament.update_one({&quot;name&quot; : &quot;Los Pibardos&quot;},{&quot;$set&quot; : {&quot;points&quot; : points}})

    &quot;&quot;&quot;
    Borra un torneo activo
    &quot;&quot;&quot;
    def delete_tournament(self):
        self.tournament.delete_one({&quot;name&quot; : &quot;Los Pibardos&quot;})

    &quot;&quot;&quot;
    Inicia la base de datos
    &quot;&quot;&quot;
    def start_db(self):
        self.conection()
        self.create_collections()
        
</code></pre>
    </div>
    <footer>
      <script src="../..//highlight.min.js"></script>
      <script src="../..//highlightjs-line-numbers.min.js"></script>
      <script>hljs.highlightAll();</script>
      <script src="../..//script.js"></script>
      <script>setSmells([{"type": "convention", "location": {"module": "database.db", "python_object": "", "line": 22, "column": 0, "end_line": null, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "trailing-whitespace", "message": "Trailing whitespace", "message_id": "C0303", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "", "line": 23, "column": 0, "end_line": null, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "trailing-whitespace", "message": "Trailing whitespace", "message_id": "C0303", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "", "line": 47, "column": 0, "end_line": null, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "line-too-long", "message": "Line too long (138/100)", "message_id": "C0301", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "", "line": 48, "column": 0, "end_line": null, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "trailing-whitespace", "message": "Trailing whitespace", "message_id": "C0303", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "", "line": 61, "column": 0, "end_line": null, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "trailing-whitespace", "message": "Trailing whitespace", "message_id": "C0303", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "", "line": 102, "column": 0, "end_line": null, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "trailing-whitespace", "message": "Trailing whitespace", "message_id": "C0303", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "", "line": 1, "column": 0, "end_line": null, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "missing-module-docstring", "message": "Missing module docstring", "message_id": "C0114", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database", "line": 10, "column": 0, "end_line": 10, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "missing-class-docstring", "message": "Missing class docstring", "message_id": "C0115", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.__init__", "line": 13, "column": 8, "end_line": 13, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "invalid-name", "message": "Attribute name \"URI\" doesn't conform to snake_case naming style", "message_id": "C0103", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.conection", "line": 19, "column": 12, "end_line": 19, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "invalid-name", "message": "Attribute name \"db\" doesn't conform to snake_case naming style", "message_id": "C0103", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.conection", "line": 15, "column": 4, "end_line": 15, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.create_collections", "line": 27, "column": 4, "end_line": 27, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.exists", "line": 34, "column": 4, "end_line": 34, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.insert_one_player", "line": 43, "column": 4, "end_line": 43, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.insert_one_player", "line": 44, "column": 11, "end_line": 44, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "singleton-comparison", "message": "Comparison 'self.exists(player['player_ds_id']) == False' should be 'self.exists(player['player_ds_id']) is False' if checking for the singleton value False, or 'not self.exists(player['player_ds_id'])' if testing for falsiness", "message_id": "C0121", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.insert_many_players", "line": 52, "column": 4, "end_line": 52, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.insert_many_players", "line": 56, "column": 15, "end_line": 56, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "singleton-comparison", "message": "Comparison 'self.exists(player['player_ds_id']) == False' should be 'self.exists(player['player_ds_id']) is False' if checking for the singleton value False, or 'not self.exists(player['player_ds_id'])' if testing for falsiness", "message_id": "C0121", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.get_players", "line": 65, "column": 4, "end_line": 65, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.insert_tournament", "line": 71, "column": 4, "end_line": 71, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.get_tournament", "line": 81, "column": 4, "end_line": 81, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.update_tournament", "line": 87, "column": 4, "end_line": 87, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.delete_tournament", "line": 93, "column": 4, "end_line": 93, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0},{"type": "convention", "location": {"module": "database.db", "python_object": "Database.start_db", "line": 99, "column": 4, "end_line": 99, "path": "src/database/db.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0}])</script>
    </footer>
  </body>
</html>