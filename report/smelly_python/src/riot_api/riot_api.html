<!DOCTYPE html>
<html>
  <head>
    <title>Smelly Python code smell report</title>
    <link href="../../style.css" rel="stylesheet">
    <link href="../../idea.min.css" rel="stylesheet">
  </head>
  <body>
    <h1>Smelly Python</h1>
    <div id="src/riot_api/riot_api.py">
      <h4>
        <a href="../../index.html">Home</a> &gt; src/riot_api/riot_api.py
      </h4>
      <pre id="code-block"><code class="language-python">
import os
import time
import requests

from dotenv import load_dotenv

# Variables del entorno
load_dotenv()
KEY = os.getenv(&quot;API_RIOT_TOKEN&quot;)

summoners = {
    &quot;&lt;@411704033225605130&gt;&quot;:&quot;D1D0&quot;,
    &quot;&lt;@602993773940572220&gt;&quot;: &quot;KARTTA&quot;,
    &quot;&lt;@748722234931282020&gt;&quot;:&quot;P4rfecto&quot;,
    &quot;&lt;@258683657038856193&gt;&quot;:&quot;Nezah&quot;,
    &quot;&lt;@583500343426547712&gt;&quot;:&quot;elioelmufa&quot;,
    &quot;&lt;@544348597991243786&gt;&quot;:&quot;MaitoChoy&quot;,
    &quot;&lt;@712826508229476382&gt;&quot;:&quot;Behamoth&quot;,
    &quot;&lt;@515334245166743574&gt;&quot;:&quot;BALANCE iRELIA&quot;,
}

&quot;&quot;&quot;
Consume la API de Riot Games para obtener datos de las cuentas de Lol
&quot;&quot;&quot;
class RiotAPI:

    &quot;&quot;&quot;
    Obtiene el puuid y el account id de cada jugador
    &quot;&quot;&quot;
    def get_players_data(self,players):
        account_data_list = []
        for k,v in players.items():
            try:
                account_data_list.append(self.get_account_data(v))
            except:
                continue
        if len(account_data_list) &gt; 0:
            for acc in account_data_list:
                try:
                    history = self.get_matches(acc['puuid'])
                    acc['statistics']  = self.get_match_results_by_summoner(history,acc['puuid'])
                except:
                    continue
            return account_data_list
        else:
            print(&quot;Ocurrio un error al obtener los datos&quot;)

    &quot;&quot;&quot;
    Obtiene desde la API los datos de un usuario del juego
    &quot;&quot;&quot;
    def get_account_data(self,summoner):
        account_info = {}
        url = f&quot;https://la2.api.riotgames.com/lol/summoner/v4/summoners/by-name/{summoner}&quot;
        params = {&quot;api_key&quot;:KEY}
        try:
            results = requests.get(url,params).json()
            account_info['summoner'] = summoner
            account_info['puuid'] = results['puuid']
            account_info['account_id'] = results['accountId']
        except:
            pass
        return account_info
    
    &quot;&quot;&quot;
    Obtiene el historial de partidas de cada jugador
    &quot;&quot;&quot;
    def get_matches(self,puuid):
        url = f&quot;https://americas.api.riotgames.com/lol/match/v5/matches/by-puuid/{puuid}/ids?startTime={int((time.time() - 259200))}&quot;
        params = {&quot;api_key&quot;:KEY}
        try:
            return requests.get(url,params).json()
        except:
            return

    &quot;&quot;&quot;
    Obtiene los detalles de cada partida enviandole el id de la partida
    &quot;&quot;&quot;
    def get_match_results_by_summoner(self,summoner_matches,puuid):
        last_statistics = []
        for m in summoner_matches:
            url = f&quot;https://americas.api.riotgames.com/lol/match/v5/matches/{m}&quot;
            params = {&quot;api_key&quot;:KEY}
            try:
                results = requests.get(url,params).json()
                if len(results['metadata']['participants']) &lt;= 3:
                    # Validacion para saber si era una partida de torneo o no
                    pass
                else:
                    for i in results['info']['participants']:
                        if i['puuid'] == puuid:
                            last_statistics.append({&quot;champ&quot;:i['championName'], &quot;win&quot;:i['win']})
            except:
                continue
        return last_statistics
                
    




</code></pre>
    </div>
    <footer>
      <script src="../..//highlight.min.js"></script>
      <script src="../..//highlightjs-line-numbers.min.js"></script>
      <script>hljs.highlightAll();</script>
      <script src="../..//script.js"></script>
      <script>setSmells([{"type": "convention", "location": {"module": "riot_api.riot_api", "python_object": "", "line": 64, "column": 0, "end_line": null, "path": "src/riot_api/riot_api.py", "severity": 0, "type": "convention"}, "symbol": "trailing-whitespace", "message": "Trailing whitespace", "message_id": "C0303", "severity": 0},{"type": "convention", "location": {"module": "riot_api.riot_api", "python_object": "", "line": 69, "column": 0, "end_line": null, "path": "src/riot_api/riot_api.py", "severity": 0, "type": "convention"}, "symbol": "line-too-long", "message": "Line too long (133/100)", "message_id": "C0301", "severity": 0},{"type": "convention", "location": {"module": "riot_api.riot_api", "python_object": "", "line": 96, "column": 0, "end_line": null, "path": "src/riot_api/riot_api.py", "severity": 0, "type": "convention"}, "symbol": "trailing-whitespace", "message": "Trailing whitespace", "message_id": "C0303", "severity": 0},{"type": "convention", "location": {"module": "riot_api.riot_api", "python_object": "", "line": 97, "column": 0, "end_line": null, "path": "src/riot_api/riot_api.py", "severity": 0, "type": "convention"}, "symbol": "trailing-whitespace", "message": "Trailing whitespace", "message_id": "C0303", "severity": 0},{"type": "convention", "location": {"module": "riot_api.riot_api", "python_object": "", "line": 101, "column": 0, "end_line": null, "path": "src/riot_api/riot_api.py", "severity": 0, "type": "convention"}, "symbol": "trailing-newlines", "message": "Trailing newlines", "message_id": "C0305", "severity": 0},{"type": "convention", "location": {"module": "riot_api.riot_api", "python_object": "", "line": 1, "column": 0, "end_line": null, "path": "src/riot_api/riot_api.py", "severity": 0, "type": "convention"}, "symbol": "missing-module-docstring", "message": "Missing module docstring", "message_id": "C0114", "severity": 0},{"type": "convention", "location": {"module": "riot_api.riot_api", "python_object": "RiotAPI.get_players_data", "line": 31, "column": 4, "end_line": 31, "path": "src/riot_api/riot_api.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0},{"type": "convention", "location": {"module": "riot_api.riot_api", "python_object": "RiotAPI.get_players_data", "line": 33, "column": 14, "end_line": 33, "path": "src/riot_api/riot_api.py", "severity": 0, "type": "convention"}, "symbol": "invalid-name", "message": "Variable name \"v\" doesn't conform to snake_case naming style", "message_id": "C0103", "severity": 0},{"type": "convention", "location": {"module": "riot_api.riot_api", "python_object": "RiotAPI.get_account_data", "line": 52, "column": 4, "end_line": 52, "path": "src/riot_api/riot_api.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0},{"type": "convention", "location": {"module": "riot_api.riot_api", "python_object": "RiotAPI.get_matches", "line": 68, "column": 4, "end_line": 68, "path": "src/riot_api/riot_api.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0},{"type": "convention", "location": {"module": "riot_api.riot_api", "python_object": "RiotAPI.get_match_results_by_summoner", "line": 79, "column": 4, "end_line": 79, "path": "src/riot_api/riot_api.py", "severity": 0, "type": "convention"}, "symbol": "missing-function-docstring", "message": "Missing function or method docstring", "message_id": "C0116", "severity": 0},{"type": "convention", "location": {"module": "riot_api.riot_api", "python_object": "RiotAPI.get_match_results_by_summoner", "line": 81, "column": 12, "end_line": 81, "path": "src/riot_api/riot_api.py", "severity": 0, "type": "convention"}, "symbol": "invalid-name", "message": "Variable name \"m\" doesn't conform to snake_case naming style", "message_id": "C0103", "severity": 0}])</script>
    </footer>
  </body>
</html>